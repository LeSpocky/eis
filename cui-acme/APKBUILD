# Contributor: Yves Schumann <yves@eisfair.org>
# Maintainer: Yves Schumann <yves@eisfair.org>
pkgname=cui-acme
pkgver=2.5.2
pkgrel=0
pkgdesc="CUI Setup for ACME"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="acme.sh-${pkgver}.tar.gz::https://github.com/Neilpang/acme.sh/archive/${pkgver}.tar.gz
        ${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.acme.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-update.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -D -m600 ${srcdir}/${pkgname}.check                      ${pkgdir}/etc/check.d/${pkgname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                       ${pkgdir}/var/install/help/${pkgname} || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.acme.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m644 ${srcdir}/acme.sh-${pkgver}/acme.sh             ${pkgdir}/usr/bin/acme.sh || return 1
}
md5sums="d0362792ca572287d7093516e2c0b35d  acme.sh-2.5.2.tar.gz
a5e41162238e5e6966c802095909a2e8  cui-acme.check
830fe7c61b448dfe643fda8021557411  cui-acme.help
15b457b156b42dcffa59e46eb65ff4ca  cui-acme.setup.services.acme.menu
41678da9c90929ae0657ced141510f4f  cui-acme.sh
9f50bc3e8c4a13336fd7b6c42fb067f0  cui-acme.txt
a8067ecb33cc1a3633fd3c8a065f7442  cui-acme-update.sh"
sha256sums="8ef8557498c678cc215390d2161cd56a7ef36c31e6e24fff456d538878e4d97c  acme.sh-2.5.2.tar.gz
31d471e4ef1b850761a616f42a237d0f1260523a25d6d788ef05aa6975232193  cui-acme.check
f08a634b14846ab3443fa7b874e64781989d72fe9e68f5d8b2f5a246f73f5954  cui-acme.help
ec5bc50ad3ce51b4b8c4e244eb5bb0520fcfceda0ea1acf061b9c16b457592fc  cui-acme.setup.services.acme.menu
4f2c3d4db9c5a8620c4ff8fe6079ec47728227f374b292df97cfbadfd4e85432  cui-acme.sh
2aad1dba4f3dcaff44e058a2ffea2fa5afeb4ae6d9cd1387f3f67d495e5def1a  cui-acme.txt
1e263eeeb0ca6f44aa554a171531089f214d71c99ba6e99a56358d974f6a013e  cui-acme-update.sh"
sha512sums="c078c8f2575399999209621b15cbd89941e12b8715374928228100b78d8dedee00e995003cc486600247f36334afbc97c2178f9a4f54707f3f039e15c46f3baf  acme.sh-2.5.2.tar.gz
df7ba60791bd755a0fed2e59fb91e1ef3aab36be88b240f7c6376ce1d5870e446f8541666aecdf972ccfcb40ae61f839e3cb82a0953cbfd02583302c40c50431  cui-acme.check
5f4ee3679a740bbe1f46b709e18d653f2c94d1c67f099140b41e9fa4d8a25b77fc2811b8952631a817e1abe6adb53cb6c947139af228e7dcb81b48dc019d4099  cui-acme.help
0350c3ec7d3bb8957fc5138995ee247f15021f8a0c3485cebe027ce2324d7964bf78aa0fe8631e722ecb1614bb90cff33d6820ac72d02078945fd6d560b0cbd2  cui-acme.setup.services.acme.menu
89f16e326050a0f129c0927f6f3fbe68d94e24e4370bd0b24673f01d40e45dd788022e9aa2b92b30ce8a0c40e86eb6b8633d6b735272d82d243b508f51630dd4  cui-acme.sh
d3b7e2b2da365ceea9165b2de290311c94eb0ef0c11cdd7c16d779cbf3d617d309d5ef92d65770a657200709c305007a65b6965e9a2ed0ccde118551d75a871f  cui-acme.txt
cc59677f901db1828072000c0e0a0507bab8ee2dbdc9ac2b5a8a18c6b6180b90b2b85628db404e5c509c35729f5222ec79a901373784de0d451eecfca213c181  cui-acme-update.sh"
