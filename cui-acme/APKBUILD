# Contributor: Yves Schumann <yves@eisfair.org>
# Maintainer: Yves Schumann <yves@eisfair.org>
pkgname=cui-acme
pkgver=1.0.0
pkgrel=0
pkgdesc="CUI Setup for ACME"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="https://github.com/Neilpang/acme.sh.git
        ${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.acme.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-update.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/default.d
	for currentDefaultConfig in `ls` ; do
		install -D -m644 ${currentDefaultConfig} ${pkgdir}/etc/default.d/${currentDefaultConfig} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.check                      ${pkgdir}/etc/check.d/${pkgname} || return 1
    install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.acme.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
}
md5sums="ebaad2e19331a2f74e21fca2b0fffaf5  acme.sh.git
c813fc14613aea67827bb2f755428e29  cui-acme.check
62a928062facf3d29068bc23c797f5f7  cui-acme.help
15b457b156b42dcffa59e46eb65ff4ca  cui-acme.setup.services.acme.menu
c6da318e2ccabf92cc39e59c43fe315d  cui-acme.sh
9f50bc3e8c4a13336fd7b6c42fb067f0  cui-acme.txt
016a42dcc2e6295da9bbb1c6aec33eaa  cui-acme-update.sh"
sha256sums="34ae9fca8b85321ded09d1a17d47b4afa7cf9f236d7927e49979dbb2fd42784a  acme.sh.git
359a902519951522521f02a7a0ac5329654f0a128f29c368a2daa7a1a12fcaba  cui-acme.check
7631e16eebc0726a138d2c4c86c3ff5c966f8fb018c9e88736d1cedad65ecb3e  cui-acme.help
ec5bc50ad3ce51b4b8c4e244eb5bb0520fcfceda0ea1acf061b9c16b457592fc  cui-acme.setup.services.acme.menu
ef2eeecdc4fad13e0807d0167f8cbb88b69d66e70db0e8f08997e4286ac2a67d  cui-acme.sh
2aad1dba4f3dcaff44e058a2ffea2fa5afeb4ae6d9cd1387f3f67d495e5def1a  cui-acme.txt
846b8090a676f71d936cdadc4f5c173d9a346061666442c0a4e5e67144b5f50e  cui-acme-update.sh"
sha512sums="0917fc0235d0730e1aae064b1533f39fd57e4e35de90ca31216b47f4b74961d81b9a92a17bf9f8d4fc6cdee94785ac387d3167e78bcd5f8a78b2c7a3b17dd350  acme.sh.git
4e2a105b50942034d77df57d56f5df07380bfd8b5a925d79d49f6c5754234ad7d352356983a8027349e32e780219d76ccd90c6c84ddadc7405e160d036439654  cui-acme.check
6d39c41012cd8691ddf78ac1ea32dd71ff9589159a1d5285033a56b93af50ad21ab668056fefd809e98aa8b82e01686c8bee8b8b99294724a1d3beb75cd5c925  cui-acme.help
0350c3ec7d3bb8957fc5138995ee247f15021f8a0c3485cebe027ce2324d7964bf78aa0fe8631e722ecb1614bb90cff33d6820ac72d02078945fd6d560b0cbd2  cui-acme.setup.services.acme.menu
ad6f3e488eebe533bf2f7387f3f784074189a36ffe548dc0214354cf32469bf2f08f69b1772703ab1fb56079b65fb55c55c5ef8767dd209c9c7f304b434930bb  cui-acme.sh
d3b7e2b2da365ceea9165b2de290311c94eb0ef0c11cdd7c16d779cbf3d617d309d5ef92d65770a657200709c305007a65b6965e9a2ed0ccde118551d75a871f  cui-acme.txt
1a143871a24520e63e41226667076dcbc111c430a03a5da05d09d89717e38dffe8353fd7e8cbdbad8b983a5586c4f2bb32d675fbad876f03497f2be968a12c6b  cui-acme-update.sh"
