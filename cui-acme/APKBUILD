# Contributor: Yves Schumann <yves@eisfair.org>
# Maintainer: Yves Schumann <yves@eisfair.org>
pkgname=cui-acme
pkgver=2.5.2
pkgrel=0
pkgdesc="CUI Setup for ACME"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 curl"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="acme.sh-${pkgver}.tar.gz::https://github.com/Neilpang/acme.sh/archive/${pkgver}.tar.gz
        ${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.acme.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-update.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -D -m600 ${srcdir}/${pkgname}.check                      ${pkgdir}/etc/check.d/${pkgname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                       ${pkgdir}/var/install/help/${pkgname} || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.acme.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m755 ${srcdir}/acme.sh-${pkgver}/acme.sh             ${pkgdir}/usr/bin/acme.sh || return 1
}
md5sums="d0362792ca572287d7093516e2c0b35d  acme.sh-2.5.2.tar.gz
067e7201b3b7f7089e5c60edbf0dc728  cui-acme.check
4e07efb6055d2e5a433658343ba7d666  cui-acme.help
8873ea362dccdd9ab6c093aa7f353dcd  cui-acme.setup.services.acme.menu
9d58e605061d1576e1e1c294ec2aee1c  cui-acme.sh
86559255876765bcaac4c5d897928219  cui-acme.txt
a8067ecb33cc1a3633fd3c8a065f7442  cui-acme-update.sh"
sha256sums="8ef8557498c678cc215390d2161cd56a7ef36c31e6e24fff456d538878e4d97c  acme.sh-2.5.2.tar.gz
4978cb5fc7481ceb6c9fda41b4bdf5b05f1c7bdd1b50345eab61b0c09fc07941  cui-acme.check
bb06fee03f24349a4cbec4955a7f3c161c30f3eaa4412972751eeb3ae71f2f72  cui-acme.help
43ed0710ac142ec0594187ea6b0b351fe29ab0b11c3812bdc87d55733b36c99e  cui-acme.setup.services.acme.menu
260b99fc0f951fbf57c624b845ab249a308d31020a41ac05f4b00d2da953ec3d  cui-acme.sh
f5d7a34b04f0d1fee75e929bfaf6dc68e906a217d6673d9a9b577616f461d2eb  cui-acme.txt
1e263eeeb0ca6f44aa554a171531089f214d71c99ba6e99a56358d974f6a013e  cui-acme-update.sh"
sha512sums="c078c8f2575399999209621b15cbd89941e12b8715374928228100b78d8dedee00e995003cc486600247f36334afbc97c2178f9a4f54707f3f039e15c46f3baf  acme.sh-2.5.2.tar.gz
6e629b1049e32daf44bfe1ccdcb6f5ce22e5647f75e50089233030dc47b5278908725628193d97bb8d0dc13037d16ce88549626d49232b5c3a1ee0a2d3280052  cui-acme.check
d3a19491bf0f5acf60f2d41c9b76eeca1eb5a6c74d0c6b529d3b0ef4b93b827570a222b103a8174a100051d2f122b63049b7bedc057ddc262009fa1c6accaaa3  cui-acme.help
49653411c3ff099eb99a44509068a63e9af3fd5ec75c1aabfa142cd2c503257450ad76c28163f1ce779b87765ce32635e42e2139f15c075e7182e572a5de6608  cui-acme.setup.services.acme.menu
32a4477032046f33dcc282b3464915a2c2daf65fdaacdaaf90656614899e7c45f76fe0f0cb9de09bd0a72070441c520635cf7acf63a7b77805d72a7954823c91  cui-acme.sh
065e6b5c9b8c5d8e86d70d65f4e78510544ab8c6cb54ce310bb5592869dcc4eb4d5c70ffb6a1115a5509412cceb77e717191f20f59e5308ac3d65b21ffabdf8a  cui-acme.txt
cc59677f901db1828072000c0e0a0507bab8ee2dbdc9ac2b5a8a18c6b6180b90b2b85628db404e5c509c35729f5222ec79a901373784de0d451eecfca213c181  cui-acme-update.sh"
