# Contributor: Yves Schumann <yves@eisfair.org>
# Maintainer: Yves Schumann <yves@eisfair.org>
pkgname=cui-acme
pkgver=2.5.2
pkgrel=0
pkgdesc="CUI Setup for ACME"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="acme.sh-${pkgver}.tar.gz::https://github.com/Neilpang/acme.sh/archive/${pkgver}.tar.gz
        ${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.acme.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-update.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -D -m600 ${srcdir}/${pkgname}.check                      ${pkgdir}/etc/check.d/${pkgname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.acme.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
	install -D -m644 ${srcdir}/acme.sh-${pkgver}/acme.sh             ${pkgdir}/usr/bin/acme.sh || return 1
}
md5sums="d0362792ca572287d7093516e2c0b35d  acme.sh-2.5.2.tar.gz
de3ced06aecd712a416ccd945f7676b3  cui-acme.check
62a928062facf3d29068bc23c797f5f7  cui-acme.help
15b457b156b42dcffa59e46eb65ff4ca  cui-acme.setup.services.acme.menu
50afdeda8ffdd40f1a498bba9b415a49  cui-acme.sh
9f50bc3e8c4a13336fd7b6c42fb067f0  cui-acme.txt
1887ebeb0a5857b35fa6c258e014a3de  cui-acme-update.sh"
sha256sums="8ef8557498c678cc215390d2161cd56a7ef36c31e6e24fff456d538878e4d97c  acme.sh-2.5.2.tar.gz
05fabb82ca6edbebed7556ba7f777d2f9a526126949e690bc82076297e509a9f  cui-acme.check
7631e16eebc0726a138d2c4c86c3ff5c966f8fb018c9e88736d1cedad65ecb3e  cui-acme.help
ec5bc50ad3ce51b4b8c4e244eb5bb0520fcfceda0ea1acf061b9c16b457592fc  cui-acme.setup.services.acme.menu
96c6c6893a310d9206c6d32a68890c3695d80d8c253eb20df12f1c0ea7584d45  cui-acme.sh
2aad1dba4f3dcaff44e058a2ffea2fa5afeb4ae6d9cd1387f3f67d495e5def1a  cui-acme.txt
6caacb07ffcbaffcf1c9f679ca1a45b53a24eb3d804971146252eb12085c1426  cui-acme-update.sh"
sha512sums="c078c8f2575399999209621b15cbd89941e12b8715374928228100b78d8dedee00e995003cc486600247f36334afbc97c2178f9a4f54707f3f039e15c46f3baf  acme.sh-2.5.2.tar.gz
28d0c7cb7c8fc2480120829212a9f98591b9fa5ee74a93054d309c160e2abd37493ed9567e377d0c2477966924d8d1137ddbff60f1ffa422c4cd28b8d274fd79  cui-acme.check
6d39c41012cd8691ddf78ac1ea32dd71ff9589159a1d5285033a56b93af50ad21ab668056fefd809e98aa8b82e01686c8bee8b8b99294724a1d3beb75cd5c925  cui-acme.help
0350c3ec7d3bb8957fc5138995ee247f15021f8a0c3485cebe027ce2324d7964bf78aa0fe8631e722ecb1614bb90cff33d6820ac72d02078945fd6d560b0cbd2  cui-acme.setup.services.acme.menu
49c10f921926951aa7effb1431b665057986528a195b06eb42f38dfa025316d8d861419e2bc6e2b6e330fa25f31c7f824df37681d2d3e7bf07897e7dd50f353b  cui-acme.sh
d3b7e2b2da365ceea9165b2de290311c94eb0ef0c11cdd7c16d779cbf3d617d309d5ef92d65770a657200709c305007a65b6965e9a2ed0ccde118551d75a871f  cui-acme.txt
84886dfe3071fef821e7f9d72618df1f437409a6e74b6abb429b5c0918e4e03d6523a6556e9add42008422e4cf7c48f5853778ca3081b2c0d4bc731069c4cf85  cui-acme-update.sh"
