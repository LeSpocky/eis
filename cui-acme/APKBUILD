# Contributor: Yves Schumann <yves@eisfair.org>
# Maintainer: Yves Schumann <yves@eisfair.org>
pkgname=cui-acme
pkgver=2.5.2
pkgrel=0
pkgdesc="CUI Setup for ACME"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="acme.sh-${pkgver}.tar.gz::https://github.com/Neilpang/acme.sh/archive/${pkgver}.tar.gz
        ${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.acme.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-update.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -D -m600 ${srcdir}/${pkgname}.check                      ${pkgdir}/etc/check.d/${pkgname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                       ${pkgdir}/var/install/help/${pkgname} || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.acme.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m644 ${srcdir}/acme.sh-${pkgver}/acme.sh             ${pkgdir}/usr/bin/acme.sh || return 1
}
md5sums="d0362792ca572287d7093516e2c0b35d  acme.sh-2.5.2.tar.gz
c9cc573c07248ba24a34db7e8b2851a1  cui-acme.check
1dd759ea3196de7ba30717c83ae1b976  cui-acme.help
15b457b156b42dcffa59e46eb65ff4ca  cui-acme.setup.services.acme.menu
f986f978abe6e37186ab289c8f180f93  cui-acme.sh
9f50bc3e8c4a13336fd7b6c42fb067f0  cui-acme.txt
1d33d9d9206656d782fc512f319685f8  cui-acme-update.sh"
sha256sums="8ef8557498c678cc215390d2161cd56a7ef36c31e6e24fff456d538878e4d97c  acme.sh-2.5.2.tar.gz
948c5f0e3582dfcf76b95eb389ebe9020ae3839fd484162ebb634c5affe719d0  cui-acme.check
e7745cf59d014eebd5b59aa140bdddb342e28856ee789d1478fd57a406e82621  cui-acme.help
ec5bc50ad3ce51b4b8c4e244eb5bb0520fcfceda0ea1acf061b9c16b457592fc  cui-acme.setup.services.acme.menu
2497870e2922cef87bafb53a1521114c03c3a00176da931f5474e6dd9b7b415c  cui-acme.sh
2aad1dba4f3dcaff44e058a2ffea2fa5afeb4ae6d9cd1387f3f67d495e5def1a  cui-acme.txt
9297d7efb3cff23b184362a8a6e47355c94fc461deb0d63d09f1c60214185e24  cui-acme-update.sh"
sha512sums="c078c8f2575399999209621b15cbd89941e12b8715374928228100b78d8dedee00e995003cc486600247f36334afbc97c2178f9a4f54707f3f039e15c46f3baf  acme.sh-2.5.2.tar.gz
d0ec26bd4eca5103a568a9ddebc7003c2b8366f0801721f317e92fd7b11b12f06367109c0a024a72f571e71f10beaf9ab38f694d94011475cafd150e9212a813  cui-acme.check
d779ca0c6efe61866a8dcc9b34ac17e621beb8412778a6af03e380f4525fd1ea6a04736b7ca04892397e09b67ca3e1438c2f9897199e6f399ec5d4b532e127c3  cui-acme.help
0350c3ec7d3bb8957fc5138995ee247f15021f8a0c3485cebe027ce2324d7964bf78aa0fe8631e722ecb1614bb90cff33d6820ac72d02078945fd6d560b0cbd2  cui-acme.setup.services.acme.menu
534a6628b94a585baa85656d7aacf37d3e7b0c9a86e483cc77890a65abdeef4f9fdd9fcf8a50b36dff60cc3c5d0aae1926cfb2bdd5c20de9103cc03cc6b35434  cui-acme.sh
d3b7e2b2da365ceea9165b2de290311c94eb0ef0c11cdd7c16d779cbf3d617d309d5ef92d65770a657200709c305007a65b6965e9a2ed0ccde118551d75a871f  cui-acme.txt
3bd479607b2474b4883d62409f5c7792aa7dd072560b3ba58e3025f0bf43e352d0b98aaafeca78739a497bc949387ca1288d17a6c6dfa6720eb21d2a4f80d67a  cui-acme-update.sh"
