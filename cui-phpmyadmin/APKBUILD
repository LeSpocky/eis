# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-phpmyadmin
pkgver=1.0.0
pkgrel=4
pkgdesc="CUI Setup for phpMyAdmin"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 cui-php-apache2 php-apache2 php-xml phpmyadmin"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.check
        ${pkgname}.help
        ${pkgname}.setup.services.phpmyadmin.menu
        ${pkgname}.setup.services.phpmyadmin.tools.menu
        ${pkgname}.setup.services.phpmyadmin.webconfiguration.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-activate-websetup.sh
        ${pkgname}-deactivate-websetup.sh
        ${pkgname}-helpers.sh
        ${pkgname}-tools-listservers.sh
        ${pkgname}-tools-pma-db.sh
        ${pkgname}-tools-pma-user.sh
        ${pkgname}-update.sh
"

_pname="phpmyadmin"
_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 ${currentDialogScript} ${pkgdir}/var/install/dialog.d/${currentDialogScript} || return 1
	done
	cd -
	cd "$_builddir"
	cd ${startdir}/default.d
	for currentDefaultConfig in `ls` ; do
		install -D -m644 ${currentDefaultConfig} ${pkgdir}/etc/default.d/${currentDefaultConfig} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.check                                ${pkgdir}/etc/check.d/${_pname} || return 1
    install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/${_pname}/${_pname}.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/${_pname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/${_pname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.menu       ${pkgdir}/var/install/menu/setup.services.phpmyadmin.menu || return 1
#	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.tools.menu ${pkgdir}/var/install/menu/setup.services.phpmyadmin.tools.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.webconfiguration.menu   ${pkgdir}/var/install/menu/setup.services.phpmyadmin.webconfiguration.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-activate-websetup.sh                 ${pkgdir}/var/install/bin/phpmyadmin-activate-websetup.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-deactivate-websetup.sh               ${pkgdir}/var/install/bin/phpmyadmin-deactivate-websetup.sh || return 1
#	install -D -m755 ${srcdir}/${pkgname}-helpers.sh                           ${pkgdir}/var/install/bin/phpmyadmin-helpers.sh || return 1
#	install -D -m755 ${srcdir}/${pkgname}-tools-listservers.sh                 ${pkgdir}/var/install/bin/phpmyadmin-tools-listservers.sh || return 1
#	install -D -m755 ${srcdir}/${pkgname}-tools-pma-db.sh                      ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-db.sh || return 1
#	install -D -m755 ${srcdir}/${pkgname}-tools-pma-user.sh                    ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-user.sh || return 1
}
md5sums="7553d9bdc92c255e69f3eab3cdd6385a  cui-phpmyadmin.check
68c252f364ece6555924a67421d74a21  cui-phpmyadmin.help
4266eecb9d08f525e4db2b0da999d5eb  cui-phpmyadmin.setup.services.phpmyadmin.menu
7b6d0da75a46f9bdbb696f738b4a0c52  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
174a73958f078da3464bb5d97545c575  cui-phpmyadmin.setup.services.phpmyadmin.webconfiguration.menu
eb7570274bfc45abadf7807d8352b87f  cui-phpmyadmin.sh
d630bf3cef53228a477a79c747dbf2fa  cui-phpmyadmin.txt
96d0cbd9f8210ed9b8c2d013c344e88d  cui-phpmyadmin-activate-websetup.sh
f0f1063f0c7a9b05f4d2f13fbed9cb74  cui-phpmyadmin-deactivate-websetup.sh
2443a29a7d86de06a752020ad48dc8bf  cui-phpmyadmin-helpers.sh
7d7a06f6c89b5bb4d83580e4c7d6c8d9  cui-phpmyadmin-tools-listservers.sh
27ed2b900524dc7df69773ad2a4a0253  cui-phpmyadmin-tools-pma-db.sh
d6d4f1659fd32efe1a29b550537cb629  cui-phpmyadmin-tools-pma-user.sh
d43b6c7cf5075a822abb01f92edd58de  cui-phpmyadmin-update.sh"
sha256sums="38f4455290cd2b66d49a64592843c4e9f0bb3dd5f98f1eee898ae15cc67cbd1d  cui-phpmyadmin.check
1458f5467b3a0204a1d694a3b3f5e6b0f0bef0213faabdd2c53b518ed71b582b  cui-phpmyadmin.help
78e988560bf032b1937d4504e65337b45d4c4c35718c112435e68787e5e008a9  cui-phpmyadmin.setup.services.phpmyadmin.menu
cd6dafa8ccaca82b88d2a07277754f1ed301f764d210ada2f5d4f9c641011c21  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
dcdf0e8098c331b667730af907f2e23f26beb6e76f364f6892e70a36389114d3  cui-phpmyadmin.setup.services.phpmyadmin.webconfiguration.menu
c29f7e5d03fa954e4d5811d8ecc9ce4a2bb4550bc8285ef90e26317ab1ec0cdf  cui-phpmyadmin.sh
b81970d936b98ad3bcc687bb3c148dbd8400258c3b13497e42158f635e8a29e4  cui-phpmyadmin.txt
ecec16fd7e4b5067329444771e8674f04d4c168a339e7e54916a66e70d1d57bb  cui-phpmyadmin-activate-websetup.sh
4b6137deefe6e4218447aa3a6f2059e48f5e1b511b8ecc9b01dcf5942bbd8d0c  cui-phpmyadmin-deactivate-websetup.sh
893e7ea851bc54b29df164faad180c0bc3c9b72a2040ddc819ab37a57c84fa63  cui-phpmyadmin-helpers.sh
c865dd1d521d64bd6d5c047b24767cde7452b3c3869e333d1df0558f5801f361  cui-phpmyadmin-tools-listservers.sh
ca15e6b5544fcb6a25df98a95ed6fb0d3ca2098a6c4c7662faf49c485bab559b  cui-phpmyadmin-tools-pma-db.sh
51506d0cc43eb8b4d97348be1ae297cd4a5c4455bfd849ac06a31f5556e34ead  cui-phpmyadmin-tools-pma-user.sh
9f5d4c36003e89517bb564887a5fc100f3a6f09fc1e24b3169629be2661fcae0  cui-phpmyadmin-update.sh"
sha512sums="ee009d67c51b50c34c39ad63fd1d08be1c2195562f60f14a23618ebdec399019ef717a3bc4abc6481f652e44ac6a3ba12ad3c295bc99b05a2a10b5c0fdb72534  cui-phpmyadmin.check
6d19963c9f1a34a3cac11a7ab297952194a8979a887811507b4ace87383d808e8093b94e6e23aca0697198d359899a1e4d089dd17d0d6c59ca79e159cf49f160  cui-phpmyadmin.help
0ea468bb4cf9cecfbf0e8f5f0c6d80fb1ac9a86f05306eab9868e9dd9aa4746f116cb702592a2311ce6eb4da768b906d75ee832e102a601811ddd3f23ec5f865  cui-phpmyadmin.setup.services.phpmyadmin.menu
eaa3948b2fa2d0a8cbfd9819ebcb7544e92abbadfdd3ad178cc5c6ef7a7884c3c4a4754b8bcdef26de6558b558df400b8225ba2885f6b07d66db1c8a3fdcda2f  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
39b1a2b0a32e655c80f878fcb884b975c93c9600746b90ce35e4f4c126a12ca5784962df605e558aa578272e861b0cf0fa9faf2628e84806f6dbadc743853196  cui-phpmyadmin.setup.services.phpmyadmin.webconfiguration.menu
d5ce58a3c7f8ceaeb79a16605b86520d1937e43ef92a6587633e7f6558fefceaf90035afd7da61a9df1278edd781d3e576693c58b901bafe46d7ac0671bdd880  cui-phpmyadmin.sh
ad142fabc4bbd05f06afd8bd359e9fdb1bc76f0028200c9f9df9de58aad666f402c713c98045e80f8e63aff468bdba44ea685ad40fd371651036b28fee9abc8b  cui-phpmyadmin.txt
ffdd1fe5f395280307aa0f3eabbe2ff68532452e1a5d3de34743bd5f4c11528b5a278b60777b3d782ced46694d82fc2f9bfa4d247a279091430342be236b77dc  cui-phpmyadmin-activate-websetup.sh
e6867b4f098728f6932a47386d5b86eb049b643cbb0d5439d90ffc89a6abf77ece56d1a2126c4b95c8424d90778ef209970591f865f0cbabace389351b855a1f  cui-phpmyadmin-deactivate-websetup.sh
575603f600cf1e3b67e1a44d4828574fb27360dfbe24d61c3b46d26a2fe7f2db813dc88ecba58203c60328f46b170dbb5cd8ceaff24f39d1d68ffe2f766a7719  cui-phpmyadmin-helpers.sh
3adcf656faa7c81b818c9cca672f6c9de7faf00227d4fe6f82fc6d5a86956b3f4eb55c3fc4f6f6f6ab340568bffe43c0c25a016f2135edb4d5f6cfb3dd91d549  cui-phpmyadmin-tools-listservers.sh
3e4653b0850a2b9f69bcfe5c2aec515333844bb54051b4f5a7dbafd1b06fe4824b8c0c501a4ce6bf5d610ac06ac39acdbcbaa3dcd80576db21da2f4df1e18426  cui-phpmyadmin-tools-pma-db.sh
21989668feb8050e04e04747067cb36d3033696db785486b17ac621ad72801d0767905967eb0566c6be3063f0fcf764b9b83b7dfdb3a4df6ede89d7a184e2ebc  cui-phpmyadmin-tools-pma-user.sh
e1b34c811e6b105948ffb1029355c7e94903c9c711ce77b248a935aa259eef9360d401000fbdbe68b564191850f8a21dcdd3a74214f4e6b4fa0df0abdc9ab5cd  cui-phpmyadmin-update.sh"
