# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-phpmyadmin
pkgver=1.0.0
pkgrel=2
pkgdesc="CUI Setup for phpMyAdmin"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 cui-php-apache2 phpmyadmin"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.txt
        ${pkgname}.sh
        ${pkgname}-update.sh
        ${pkgname}.help
        ${pkgname}.setup.services.phpmyadmin.menu
        ${pkgname}.setup.services.phpmyadmin.tools.menu
"

_builddir=
prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 $currentDialogScript ${pkgdir}/var/install/dialog.d/$currentDialogScript || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/phpmyadmin/phpmyadmin.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/phpmyadmin.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/phpmyadmin-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/phpmyadmin || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.menu       ${pkgdir}/var/install/menu/setup.services.phpmyadmin.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.tools.menu ${pkgdir}/var/install/menu/setup.services.phpmyadmin.tools.menu || return 1
}
md5sums="2021f0d6dba1adc4ddd673fc033f469b  cui-phpmyadmin.txt
d29d2e4d946181fd902c68a0ab387683  cui-phpmyadmin.sh
11a1fc46a86d59e20f13ca687047bb3d  cui-phpmyadmin-update.sh
29d5f193acb6198a4f50834ba348ea6b  cui-phpmyadmin.help
5c32ba40b28f6dbb663131a3e6c67167  cui-phpmyadmin.setup.services.phpmyadmin.menu
3ae9dd29ecc37e19812bcaa88fedeb69  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu"
sha256sums="1ada5d606e5cd69fed4032c90c760dfb27e1a964646ab5703c1de32631e67d94  cui-phpmyadmin.txt
5058349a7dbc636c19bb5a8bdc188b5b0754713fe3a9893dd6841fe497aca79a  cui-phpmyadmin.sh
67a117f647ae1527f37043d81f01101c91077f2a24c34e12423cd5844986706a  cui-phpmyadmin-update.sh
b913768365d9bd6359d990855fbb2bfcfebece87093570c8582c0af58234e366  cui-phpmyadmin.help
3f09059170c2cc1709e9d14f826eb9aa5b5c2604edaed24ab2067c5f8dfef5db  cui-phpmyadmin.setup.services.phpmyadmin.menu
5fd1fd43149149323ed50a8d51f685d3fa24cd88825404efe91ca5652b615dea  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu"
sha512sums="72ea747c6840ff0433f8f4f1032807cfc9fa0e876e912546aa2dfe4b76ac60d2ad7959df083d467d634585458704f21d6fa89910b169fc74190454b28d2615f3  cui-phpmyadmin.txt
13a5b925a3c0c45c2d6afc524e152b3a9c76376237ab8015b5b66e541bb7161b42ea8bda3024cce2f4816e72f100b7938a0267eac65ca5e6ed391215efecbd91  cui-phpmyadmin.sh
aff09fb86f88f5c3f9c7517a5f898983bd5752421f43dc637d9f93e716aaa0464a2fa5e2573ca8149b7fb1a6cac140c14a806969cc25413aeef6d031efdd7069  cui-phpmyadmin-update.sh
159f5f99755fa29e23d85c0f55703642e718c4e56f6a268b84e27dc725ab03026717582cff5cbbc71fc4c7d2f90889f1288b99962dd59e1d51eb4c4f2efb8907  cui-phpmyadmin.help
c2bc971da71a270f599d9cca88421ff4e0c3aab27f3ed79dd5eab9ec2272e2e3f85a583986a8100a6771305d33c0a21a53d5c6541d62fcff2ee82b4df3750914  cui-phpmyadmin.setup.services.phpmyadmin.menu
53c3cfa758f736129bb042594238720d2b61bfa0ae102caa4659e6d1194f2cc741a5e171bf7e96390e18a37059e079d95bc017cd00c70cec656cabedb76ff0b6  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu"
