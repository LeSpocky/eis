# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-phpmyadmin
pkgver=1.0.0
pkgrel=4
pkgdesc="CUI Setup for phpMyAdmin"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 cui-php-apache2 php-apache2 php-xml phpmyadmin"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.check
        ${pkgname}.check.exp
        ${pkgname}.check.ext
        ${pkgname}.help
        ${pkgname}.setup.services.phpmyadmin.menu
        ${pkgname}.setup.services.phpmyadmin.tools.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-helpers.sh
        ${pkgname}-tools-listservers.sh
        ${pkgname}-tools-pma-db.sh
        ${pkgname}-tools-pma-user.sh
        ${pkgname}-update.sh
"

_pname="phpmyadmin"
_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 ${currentDialogScript} ${pkgdir}/var/install/dialog.d/${currentDialogScript} || return 1
	done
	cd -
	cd "$_builddir"
	cd ${startdir}/default.d
	for currentDefaultConfig in `ls` ; do
		install -D -m644 ${currentDefaultConfig} ${pkgdir}/etc/default.d/${currentDefaultConfig} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.check                                ${pkgdir}/etc/check.d/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.check.exp                            ${pkgdir}/etc/check.d/${_pname}.exp || return 1
	install -D -m644 ${srcdir}/${pkgname}.check.ext                            ${pkgdir}/etc/check.d/${_pname}.ext || return 1
  install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/${_pname}/${_pname}.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/${_pname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/${_pname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.menu       ${pkgdir}/var/install/menu/setup.services.phpmyadmin.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.tools.menu ${pkgdir}/var/install/menu/setup.services.phpmyadmin.tools.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-helpers.sh                           ${pkgdir}/var/install/bin/phpmyadmin-helpers.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-listservers.sh                 ${pkgdir}/var/install/bin/phpmyadmin-tools-listservers.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-db.sh                      ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-db.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-user.sh                    ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-user.sh || return 1
}
md5sums="29d5f193acb6198a4f50834ba348ea6b  cui-phpmyadmin.help
857ee7eef3e251456d7a457505f42ebb  cui-phpmyadmin.setup.services.phpmyadmin.menu
7b6d0da75a46f9bdbb696f738b4a0c52  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
7d417bacbc22545eddba5f362e49cfee  cui-phpmyadmin.sh
a905fd0019aabe9481f471148b3d1c4e  cui-phpmyadmin.txt
2443a29a7d86de06a752020ad48dc8bf  cui-phpmyadmin-helpers.sh
7d7a06f6c89b5bb4d83580e4c7d6c8d9  cui-phpmyadmin-tools-listservers.sh
27ed2b900524dc7df69773ad2a4a0253  cui-phpmyadmin-tools-pma-db.sh
d6d4f1659fd32efe1a29b550537cb629  cui-phpmyadmin-tools-pma-user.sh
ee616ced469a0f9dec911536424cc8aa  cui-phpmyadmin-update.sh"
sha256sums="b913768365d9bd6359d990855fbb2bfcfebece87093570c8582c0af58234e366  cui-phpmyadmin.help
dfd420cb355fea89f0a7c90c441540e3a9aecd6af99a9a285c630e75cb2b74cf  cui-phpmyadmin.setup.services.phpmyadmin.menu
cd6dafa8ccaca82b88d2a07277754f1ed301f764d210ada2f5d4f9c641011c21  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
51fbcd3ef73104a63357b56e774ce5222f8de9e3ece3e58ff8ed9ebd2d08a3a0  cui-phpmyadmin.sh
3d081ad2cf8fe724ab722e2f1be4d2da7fa0ed90cbc6c2aa53dc90cea008c652  cui-phpmyadmin.txt
893e7ea851bc54b29df164faad180c0bc3c9b72a2040ddc819ab37a57c84fa63  cui-phpmyadmin-helpers.sh
c865dd1d521d64bd6d5c047b24767cde7452b3c3869e333d1df0558f5801f361  cui-phpmyadmin-tools-listservers.sh
ca15e6b5544fcb6a25df98a95ed6fb0d3ca2098a6c4c7662faf49c485bab559b  cui-phpmyadmin-tools-pma-db.sh
51506d0cc43eb8b4d97348be1ae297cd4a5c4455bfd849ac06a31f5556e34ead  cui-phpmyadmin-tools-pma-user.sh
b6881ac78176b55e29aec87271d124cf2014699b6432c4ed916f295bb7eff50f  cui-phpmyadmin-update.sh"
sha512sums="159f5f99755fa29e23d85c0f55703642e718c4e56f6a268b84e27dc725ab03026717582cff5cbbc71fc4c7d2f90889f1288b99962dd59e1d51eb4c4f2efb8907  cui-phpmyadmin.help
52f2a9213852bfeff372ff93670791c77e4bc4e638d5756f45259d7cd47e41eb2bbcbbff5e4959ab7b34e00fa95633bfa4f39c4eddb75e42c6ea908ebbb6d87c  cui-phpmyadmin.setup.services.phpmyadmin.menu
eaa3948b2fa2d0a8cbfd9819ebcb7544e92abbadfdd3ad178cc5c6ef7a7884c3c4a4754b8bcdef26de6558b558df400b8225ba2885f6b07d66db1c8a3fdcda2f  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
6dddb435b6c0e8f333de9ca48814fc82af8cb39cb9ce4ee962f18e4fb859cb87f33f0d37bf4406b4cb1e0eff909ead6f7e5ce87514a2ca21ca9dce8a3c40dea8  cui-phpmyadmin.sh
2ffc1d4f3171df09f93abcce9da662866d62a15fa1e857610311ce9e4cb5a6440fe55a184235c92ae03cf1a5538c1ea5aa030c698ebaad75e081396a630a8e53  cui-phpmyadmin.txt
575603f600cf1e3b67e1a44d4828574fb27360dfbe24d61c3b46d26a2fe7f2db813dc88ecba58203c60328f46b170dbb5cd8ceaff24f39d1d68ffe2f766a7719  cui-phpmyadmin-helpers.sh
3adcf656faa7c81b818c9cca672f6c9de7faf00227d4fe6f82fc6d5a86956b3f4eb55c3fc4f6f6f6ab340568bffe43c0c25a016f2135edb4d5f6cfb3dd91d549  cui-phpmyadmin-tools-listservers.sh
3e4653b0850a2b9f69bcfe5c2aec515333844bb54051b4f5a7dbafd1b06fe4824b8c0c501a4ce6bf5d610ac06ac39acdbcbaa3dcd80576db21da2f4df1e18426  cui-phpmyadmin-tools-pma-db.sh
21989668feb8050e04e04747067cb36d3033696db785486b17ac621ad72801d0767905967eb0566c6be3063f0fcf764b9b83b7dfdb3a4df6ede89d7a184e2ebc  cui-phpmyadmin-tools-pma-user.sh
4f2f0584047f6a37dc951dc6a8981ea00954c3e3c6d4a26fcfc175c3e431776ef71c225ae4c29ef736c33dbc3fd1ffa6d99796cbaa8f89dce771f45e18077100  cui-phpmyadmin-update.sh"
