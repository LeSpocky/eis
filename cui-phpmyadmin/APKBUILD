# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-phpmyadmin
pkgver=1.0.0
pkgrel=4
pkgdesc="CUI Setup for phpMyAdmin"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 cui-php-apache2 php-apache2 php-xml phpmyadmin"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.help
        ${pkgname}.setup.services.phpmyadmin.menu
        ${pkgname}.setup.services.phpmyadmin.tools.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-helpers.sh
        ${pkgname}-tools-listservers.sh
        ${pkgname}-tools-pma-db.sh
        ${pkgname}-tools-pma-user.sh
        ${pkgname}-update.sh
"

_builddir=
prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 ${currentDialogScript} ${pkgdir}/var/install/dialog.d/${currentDialogScript} || return 1
	done
	cd -
	cd "$_builddir"
	cd ${startdir}/default.d
	for currentDefaultConfig in `ls` ; do
		install -D -m644 ${currentDefaultConfig} ${pkgdir}/etc/default.d/${currentDefaultConfig} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/phpmyadmin/phpmyadmin.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/phpmyadmin.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/phpmyadmin-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/phpmyadmin || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.menu       ${pkgdir}/var/install/menu/setup.services.phpmyadmin.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.tools.menu ${pkgdir}/var/install/menu/setup.services.phpmyadmin.tools.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-helpers.sh                           ${pkgdir}/var/install/bin/phpmyadmin-helpers.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-listservers.sh                 ${pkgdir}/var/install/bin/phpmyadmin-tools-listservers.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-db.sh                      ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-db.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-user.sh                    ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-user.sh || return 1
}
md5sums="29d5f193acb6198a4f50834ba348ea6b  cui-phpmyadmin.help
857ee7eef3e251456d7a457505f42ebb  cui-phpmyadmin.setup.services.phpmyadmin.menu
7b6d0da75a46f9bdbb696f738b4a0c52  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
6499fa76747274362d6aba660f4526df  cui-phpmyadmin.sh
a905fd0019aabe9481f471148b3d1c4e  cui-phpmyadmin.txt
2443a29a7d86de06a752020ad48dc8bf  cui-phpmyadmin-helpers.sh
7d7a06f6c89b5bb4d83580e4c7d6c8d9  cui-phpmyadmin-tools-listservers.sh
ca8e826a2732fa5712607ec9b46db8a3  cui-phpmyadmin-tools-pma-db.sh
fab2fd54cc6e8823bc92704c6f1e76cd  cui-phpmyadmin-tools-pma-user.sh
fdad7c8c7079b63f584a7a0f3acf78a3  cui-phpmyadmin-update.sh"
sha256sums="b913768365d9bd6359d990855fbb2bfcfebece87093570c8582c0af58234e366  cui-phpmyadmin.help
dfd420cb355fea89f0a7c90c441540e3a9aecd6af99a9a285c630e75cb2b74cf  cui-phpmyadmin.setup.services.phpmyadmin.menu
cd6dafa8ccaca82b88d2a07277754f1ed301f764d210ada2f5d4f9c641011c21  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
64a4276ef592974ddef6378271042923a7082b82f12b94628d59bf6351b3e075  cui-phpmyadmin.sh
3d081ad2cf8fe724ab722e2f1be4d2da7fa0ed90cbc6c2aa53dc90cea008c652  cui-phpmyadmin.txt
893e7ea851bc54b29df164faad180c0bc3c9b72a2040ddc819ab37a57c84fa63  cui-phpmyadmin-helpers.sh
c865dd1d521d64bd6d5c047b24767cde7452b3c3869e333d1df0558f5801f361  cui-phpmyadmin-tools-listservers.sh
c7dc95536046be4fabd10c7cd1e6c9b330471545ed83968a450f5aa08d8a217b  cui-phpmyadmin-tools-pma-db.sh
4338f8cf5636c2f51d6071921081baad088f4e8821a330e1ccf06a9093f2e825  cui-phpmyadmin-tools-pma-user.sh
74617c589cbd2a65894b59d0002f8e82d5c53265995169da72d581198d5b7191  cui-phpmyadmin-update.sh"
sha512sums="159f5f99755fa29e23d85c0f55703642e718c4e56f6a268b84e27dc725ab03026717582cff5cbbc71fc4c7d2f90889f1288b99962dd59e1d51eb4c4f2efb8907  cui-phpmyadmin.help
52f2a9213852bfeff372ff93670791c77e4bc4e638d5756f45259d7cd47e41eb2bbcbbff5e4959ab7b34e00fa95633bfa4f39c4eddb75e42c6ea908ebbb6d87c  cui-phpmyadmin.setup.services.phpmyadmin.menu
eaa3948b2fa2d0a8cbfd9819ebcb7544e92abbadfdd3ad178cc5c6ef7a7884c3c4a4754b8bcdef26de6558b558df400b8225ba2885f6b07d66db1c8a3fdcda2f  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
31c28f80fc2ff94d7b25fab062db3011b025f34b30fcabe0a6466437dbd2fe2142d636eee4b02f6d1844fada511375597f0cb6826921369bf59800d0feaf98bd  cui-phpmyadmin.sh
2ffc1d4f3171df09f93abcce9da662866d62a15fa1e857610311ce9e4cb5a6440fe55a184235c92ae03cf1a5538c1ea5aa030c698ebaad75e081396a630a8e53  cui-phpmyadmin.txt
575603f600cf1e3b67e1a44d4828574fb27360dfbe24d61c3b46d26a2fe7f2db813dc88ecba58203c60328f46b170dbb5cd8ceaff24f39d1d68ffe2f766a7719  cui-phpmyadmin-helpers.sh
3adcf656faa7c81b818c9cca672f6c9de7faf00227d4fe6f82fc6d5a86956b3f4eb55c3fc4f6f6f6ab340568bffe43c0c25a016f2135edb4d5f6cfb3dd91d549  cui-phpmyadmin-tools-listservers.sh
33a85c5dafde29e5d11cd4e1cac6f238576aaefd98665ead58db6f37f23eee1c4b9dca92bf7afe9fcf9e5d599060c17697bcb19b9693bc798c95090991fefc69  cui-phpmyadmin-tools-pma-db.sh
0bc55dafd43502ee24f21761ec9defae30b4793175e639ffaf4d06ff3f9d86042982df60fedd1c6fe62256ce93f72831f6d0c9645e665295fd6c000fcdd38d2f  cui-phpmyadmin-tools-pma-user.sh
76b8699c703e94d83fe94ec62f2abcaba9b9d46522e69a6da5c47c30d8f352f0ac7cd4da7e23ab53edd48d466428583b2c003f65f8f03e0611dc909fc765b76a  cui-phpmyadmin-update.sh"
