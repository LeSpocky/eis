# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-phpmyadmin
pkgver=1.0.0
pkgrel=3
pkgdesc="CUI Setup for phpMyAdmin"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu cui-apache2 cui-php-apache2 php-apache2 php-xml phpmyadmin"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.help
        ${pkgname}.setup.services.phpmyadmin.menu
        ${pkgname}.setup.services.phpmyadmin.tools.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-helpers.sh
        ${pkgname}-tools-pma-db.sh
        ${pkgname}-tools-pma-user.sh
        ${pkgname}-update.sh
"

_builddir=
prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 ${currentDialogScript} ${pkgdir}/var/install/dialog.d/${currentDialogScript} || return 1
	done
	cd -
	cd ${startdir}/default.d
	for currentDefaultConfig in `ls` ; do
		install -D -m644 ${currentDefaultConfig} ${pkgdir}/etc/default.d/${currentDefaultConfig} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/phpmyadmin/phpmyadmin.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/phpmyadmin.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/phpmyadmin-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/phpmyadmin || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.menu       ${pkgdir}/var/install/menu/setup.services.phpmyadmin.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.phpmyadmin.tools.menu ${pkgdir}/var/install/menu/setup.services.phpmyadmin.tools.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}-helpers.sh                           ${pkgdir}/var/install/bin/phpmyadmin-helpers.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-db.sh                      ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-db.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-tools-pma-user.sh                    ${pkgdir}/var/install/bin/phpmyadmin-tools-pma-user.sh || return 1
}
md5sums="29d5f193acb6198a4f50834ba348ea6b  cui-phpmyadmin.help
2ebf73d0b28197b2d7635b53209689ad  cui-phpmyadmin.setup.services.phpmyadmin.menu
ae644270aaacccd95fbc3dfbbddeaa35  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
2ebf6247da2b33ab52b183631672a299  cui-phpmyadmin.sh
dd63aa8ca1dabe2fa6f6fcbfccd25df3  cui-phpmyadmin.txt
2443a29a7d86de06a752020ad48dc8bf  cui-phpmyadmin-helpers.sh
a3245639869c8454a484186d7ae340fa  cui-phpmyadmin-tools-pma-db.sh
fd47085e22d05ab23b7c20b9013b1ef4  cui-phpmyadmin-tools-pma-user.sh
e85c1f507b5ac55ae0f0bcf83a77dc4d  cui-phpmyadmin-update.sh"
sha256sums="b913768365d9bd6359d990855fbb2bfcfebece87093570c8582c0af58234e366  cui-phpmyadmin.help
12cefd6b06797d7a6573cb065340c4a3c22ab33d86f862bbb195fff5c157ec73  cui-phpmyadmin.setup.services.phpmyadmin.menu
a4a2c121a5809eb483437fb73e91b550bfcae1aa9c40ae3a2e74f61fb9896472  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
3cbf9c30dd774fc466c3ea335074024eac59c6c021aa026364649b1171231b91  cui-phpmyadmin.sh
c090a841fd76d4e92894251df423b94e83d7a23a71629163870e5b071d6e6d3a  cui-phpmyadmin.txt
893e7ea851bc54b29df164faad180c0bc3c9b72a2040ddc819ab37a57c84fa63  cui-phpmyadmin-helpers.sh
91b7219839e8937149f83ebe5bd064e43e06dd30137db03a57271182eeb69d2e  cui-phpmyadmin-tools-pma-db.sh
7a5efc747eacc28412192b684620a4bbfbe847e6ee0255e0f009eec3e707efc1  cui-phpmyadmin-tools-pma-user.sh
378b73e8ac065e28b1cf11bdeb2e08cc2909fa694e1f1de16b8074c09d29d7a6  cui-phpmyadmin-update.sh"
sha512sums="159f5f99755fa29e23d85c0f55703642e718c4e56f6a268b84e27dc725ab03026717582cff5cbbc71fc4c7d2f90889f1288b99962dd59e1d51eb4c4f2efb8907  cui-phpmyadmin.help
c6ca361ec531885322041255f9822508cdef9ce7f95e4d8d781a56bc42bfb3d6a64aebb25904c545c22106cdddc30cc27565e9e5b1b5bd657bd4dd1ce7732fa3  cui-phpmyadmin.setup.services.phpmyadmin.menu
57518ccf086465431e7114f76d1a0fa56e0fe508687839b4413400e5e963464c3f9be12f1d3f1327657ee47fc46b59467389bb1abbf0376a734a8b606e5e5e9b  cui-phpmyadmin.setup.services.phpmyadmin.tools.menu
13d78ebd751e68e5058fbc9517723db61cfa798947aa9c7834a796823f1616d0cd4aedef9f442a5fa0417234d7c0f170986ade7b5255343a82493bd01492f345  cui-phpmyadmin.sh
50037520fffe013586eaa6df656d1e530641db4429d088cd173b73cf4db08c4333d7298e4c3ca2b87e7357320539e56b4861340b708bc72fbf1bbd068a694228  cui-phpmyadmin.txt
575603f600cf1e3b67e1a44d4828574fb27360dfbe24d61c3b46d26a2fe7f2db813dc88ecba58203c60328f46b170dbb5cd8ceaff24f39d1d68ffe2f766a7719  cui-phpmyadmin-helpers.sh
75b27c1371fd628151148c78004505580d6f9dc631ec5616127b1d6e66a67beb4b2766413e8ccd45f2833b024e7260b7434d162f3bcf48158e958bc5ad147c46  cui-phpmyadmin-tools-pma-db.sh
3c9b54f6c9312c11fdf74dbe879708ad6cf478a91aecd1ce72d001fce42145eae1b9a6b99276793548765db0d7ad6e8d239e500940fe05202ce994809fcea60f  cui-phpmyadmin-tools-pma-user.sh
7dd7cdfcc44c1587bf3023e407ca5d564beb97920d81105afed34298cf89ccb876c5a4a0b21aae26824af1b1e9afcdd57d500f8f235f18dc04c0b5fc97098b77  cui-phpmyadmin-update.sh"
