# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-quasselcore
pkgver=1.0.0
pkgrel=2
pkgdesc="CUI Setup for quasselcore"
url="http://www.quassel-irc.org"
arch="noarch"
license="GPL"
depends="cuimenu quasselcore"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.help
        ${pkgname}.setup.services.menu
        ${pkgname}.setup.services.user.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}-add-user.sh
        ${pkgname}-change-userpass.sh
        ${pkgname}-update.sh
"

_builddir=
prepare() {
	local i
	cd "$_builddir"
	for i in $source ; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 $currentDialogScript ${pkgdir}/var/install/dialog.d/$currentDialogScript || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.txt                        ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.txt || return 1
	install -D -m755 ${srcdir}/${pkgname}-add-user.sh                ${pkgdir}/var/install/bin/${pkgname}-add-user.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-change-userpass.sh         ${pkgdir}/var/install/bin/${pkgname}-change-userpass.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                         ${pkgdir}/var/install/config.d/${pkgname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                  ${pkgdir}/var/install/config.d/${pkgname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                       ${pkgdir}/var/install/help/${pkgname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.menu        ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.user.menu   ${pkgdir}/var/install/menu/setup.services.${pkgname}.user.menu || return 1
}
md5sums="4b65b9d04448537f2ef298bf280b9bb6  cui-quasselcore.help
2675f7bb7b7dcc75cbf8b13cebd68269  cui-quasselcore.setup.services.menu
583dc8dc348f706b0a39d73232ce8cee  cui-quasselcore.setup.services.user.menu
0713354028648ea41e75bfc36def804f  cui-quasselcore.sh
d35595bba5b78c7abbf8388dfb9aacc6  cui-quasselcore.txt
cc4e016cc432d99a33d50f6d7769c097  cui-quasselcore-add-user.sh
d5b23293014bb68a989a554e92d6c9c8  cui-quasselcore-change-userpass.sh
0c1a3aaa273e466097e2ea19c273af21  cui-quasselcore-update.sh"
