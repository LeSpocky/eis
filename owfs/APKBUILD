# Contributor: Jens Vehlhaber jv <jens@eisfair.org>
# Maintainer: Jens Vehlhaber jv <jens@eisfair.org>
pkgname=owfs
pkgver=3.1p0
pkgrel=0
pkgdesc="OWFS 1-Wire File System"
url="http://www.owfs.org"
arch="all"
license="GPLv2"
depends=""
depends_dev="linux-headers fuse-dev automake autoconf" # libusb-dev"
makedepends="$depends_dev"
install=""
subpackages="$pkgname-doc $pkgname-dev"
source="http://downloads.sourceforge.net/project/owfs/owfs/$pkgver/owfs-$pkgver.tar.gz
	"

_builddir="$srcdir"/owfs-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	export CPPFLAGS="-I/usr/include/libusb-1.0"
	autoconf
	./configure \
	        --prefix=/usr \
                --libexecdir=/usr/lib \
                --disable-parport \
                --disable-owtcl \
                --disable-libow-perl \
                --disable-owphp \
                --disable-owpython \
                --disable-swig \
                --disable-zero  || return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
}

md5sums="3d8919af078ae8c9171e5713a1789195  owfs-3.1p0.tar.gz"
sha256sums="62fca1b3e908cd4515c9eb499bf2b05020bbbea4a5b73611ddc6f205adec7a54  owfs-3.1p0.tar.gz"
sha512sums="fc00e9d55be1cfd419df9f39c0aa3517f9c21a2ff4133d9feffc8e737bfa194eb4acba0a0fec65134cb86c8640c5341db638a74674e973025f203a989ca678ba  owfs-3.1p0.tar.gz"
