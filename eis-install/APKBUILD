# Contributor: jv <jens@eisfair.org>
# Maintainer: jv <jens@eisfair.org>
pkgname=eis-install
pkgver=1.0.0
pkgrel=4
pkgdesc="eisfair-ng installer"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="bash dialog"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages=""
source="
	eis-install.initd
	eis-install.sh
	eis-install.setup-disk
	"

_builddir=
prepare() {
	echo ""
}

build() {
	cd "$_builddir"
}

package() {
	alpinerelease=`awk -F \. {'printf "%s.%s",$1,$2'} /etc/alpine-release`
	cd "$_builddir"
	install -m755 -D "$srcdir"/$pkgname.initd \
		"$pkgdir"/etc/init.d/$pkgname || return 1
	install -m755 -D "$srcdir"/$pkgname.sh \
		"$pkgdir"/bin/$pkgname || return 1
	install -m755 -D "$srcdir"/$pkgname.setup-disk \
		"$pkgdir"/bin/$pkgname.setup-disk || return 1
	sed -i -e "s/_RELVERS_/${alpinerelease}/g" ${pkgdir}/bin/$pkgname.setup-disk
}

md5sums="a98734dee80911e7a4340ab5b3898a9c  eis-install.initd
02d5b85d8e0409c49b9e49104db289ba  eis-install.sh
37982bbb82843ef8943e0ccefc0062ae  eis-install.setup-disk"
sha256sums="b4fbfc83c5beaeed746c4e42bf9698d3529a123ffd36bc2a2de8faf3daab2495  eis-install.initd
fe7ce04e9de0f6d63266ea480b23bccd4192042fb0d5b28da3497de38ea0a669  eis-install.sh
a799a91e5f32fa9c1af2c335085bbcee258f0fbfcfb0e477bcd66e3d78f9056f  eis-install.setup-disk"
sha512sums="81cfd80aa85adda7948cf40c6b093521a5bf33e87c12c9338a346d31455e6ca5e166aef8647c9d4a40d06e4c4ecb64da386cc81b422338c469f986cc6503656c  eis-install.initd
a357ac41e992a8d1afb18fb3f6e79c0b9873f0f9c949fc3f2bcd29b424a8e1b8a5ce02347263e565db8d4f38ff9990fe0f52a4e74d3f112a267b09fccafe9275  eis-install.sh
5f1e2a098a368e166f7642b6ea43f3f0e8b403c0271416bfe853b0fa23f3bacef9c3ea17b41d2d0792803fb09913c6ee11a014fa207fbf21f0585b3b319a3dc1  eis-install.setup-disk"
