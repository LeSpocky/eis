# Contributor: jv <jens@eisfair.org>
# Maintainer: jv <jens@eisfair.org>
pkgname=cui-vmail
pkgver=1.0.0
pkgrel=0
pkgdesc="CUI setup for postfix/dovecot with virtual mail user"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu postfix-mysql smc-milter-new dovecot dovecot-mysql dovecot-pigeonhole"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.pre-upgrade $pkgname.post-upgrade $pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.default
		${pkgname}.check
		${pkgname}.check.exp
		${pkgname}.help
		${pkgname}.initd
		${pkgname}.sh
		${pkgname}-update.sh
		${pkgname}.menu
		${pkgname}.modules.menu
		${pkgname}.tools.menu
		${pkgname}.user.menu
		${pkgname}-modules-fetchmail
		${pkgname}-tools-recipient-access.cui.sh
		${pkgname}-user-maildropfilter.cui.sh
		${pkgname}-modules-maildropfilter
		${pkgname}-tools-sender-access.cui.sh
		${pkgname}-user-relaymap.cui.sh
		${pkgname}-modules-mailhandling
		${pkgname}-user-canonicalmap.cui.sh
		${pkgname}-user-userhandling.cui.sh
		${pkgname}-tools-client-access.cui.sh
		${pkgname}-user-domainhandling.cui.sh
		${pkgname}-tools-fetchmailhandling.cui.sh
		${pkgname}-user-forwardings.cui.sh
		${pkgname}.sqldata.sql
		${pkgname}.sqltable.sql
		${pkgname}.sqltrigger.sql
		${pkgname}.sqlview.sql
		${pkgname}.txt
"
_pname="vmail"
_builddir=

prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -D -m644 ${srcdir}/${pkgname}.check         ${pkgdir}/etc/check.d/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.check.exp     ${pkgdir}/etc/check.d/${_pname}.exp || return 1
	install -D -m644 ${srcdir}/${pkgname}.default       ${pkgdir}/etc/default.d/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.help          ${pkgdir}/var/install/help/${_pname} || return 1
	install -D -m755 ${srcdir}/${pkgname}.initd         ${pkgdir}/etc/init.d/${_pname} || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh            ${pkgdir}/var/install/config.d/${_pname}.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh     ${pkgdir}/var/install/config.d/${_pname}-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.menu          ${pkgdir}/var/install/menu/setup.services.${pkgname}.menu || return 
	install -D -m644 ${srcdir}/${pkgname}.modules.menu  ${pkgdir}/var/install/menu/setup.services.${pkgname}.modules.menu || return 
	install -D -m644 ${srcdir}/${pkgname}.tools.menu    ${pkgdir}/var/install/menu/setup.services.${pkgname}.tools.menu || return 
	install -D -m644 ${srcdir}/${pkgname}.user.menu     ${pkgdir}/var/install/menu/setup.services.${pkgname}.user.menu || return 
	install -D -m755 ${srcdir}/${pkgname}-modules-fetchmail              ${pkgdir}/var/install/bin/${pkgname}-modules-fetchmail
	install -D -m755 ${srcdir}/${pkgname}-tools-recipient-access.cui.sh  ${pkgdir}/var/install/bin/${pkgname}-tools-recipient-access.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-user-maildropfilter.cui.sh     ${pkgdir}/var/install/bin/${pkgname}-user-maildropfilter.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-modules-maildropfilter         ${pkgdir}/var/install/bin/${pkgname}-modules-maildropfilter
	install -D -m755 ${srcdir}/${pkgname}-tools-sender-access.cui.sh     ${pkgdir}/var/install/bin/${pkgname}-tools-sender-access.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-user-relaymap.cui.sh           ${pkgdir}/var/install/bin/${pkgname}-user-relaymap.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-modules-mailhandling           ${pkgdir}/var/install/bin/${pkgname}-modules-mailhandling
	install -D -m755 ${srcdir}/${pkgname}-user-canonicalmap.cui.sh       ${pkgdir}/var/install/bin/${pkgname}-user-canonicalmap.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-user-userhandling.cui.sh       ${pkgdir}/var/install/bin/${pkgname}-user-userhandling.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-tools-client-access.cui.sh     ${pkgdir}/var/install/bin/${pkgname}-tools-client-access.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-user-domainhandling.cui.sh     ${pkgdir}/var/install/bin/${pkgname}-user-domainhandling.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-tools-fetchmailhandling.cui.sh ${pkgdir}/var/install/bin/${pkgname}-tools-fetchmailhandling.cui.sh
	install -D -m755 ${srcdir}/${pkgname}-user-forwardings.cui.sh        ${pkgdir}/var/install/bin/${pkgname}-user-forwardings.cui.sh
	install -D -m644 ${srcdir}/${pkgname}.txt           ${pkgdir}/usr/share/doc/${_pname}/${_pname}.txt || return 1
}

md5sums="4a80c0b0d96a54c82b31c44b56f573ed  cui-vmail.default
675fb8c012eed5cd339448134b2f21f5  cui-vmail.check
45fd728e1d619a972a98ab1fc6ec1917  cui-vmail.check.exp
86735bcdcc8dc896ca39e188178a6d69  cui-vmail.help
b2a4d3e7b9f197cfa27c30ee9ac60a3d  cui-vmail.initd
1d5461fbdec63b9404890cdce3e038a5  cui-vmail.sh
b5c8c52c25ab08bc7480470423a9e324  cui-vmail-update.sh
0205c16ebd7fc14b121c92a621c456ca  cui-vmail.menu
5a3e69a8435af69f9c6fc4485a192cd6  cui-vmail.modules.menu
5d84f98192b9b90127e72d1c3555181a  cui-vmail.tools.menu
1507062eb8e4c147f45fa855a90c547f  cui-vmail.user.menu
cbc02e11b6cf874c58ae17ae0b3dd8eb  cui-vmail-modules-fetchmail
f739c8c03b87dac300f3e7c0ae0739f1  cui-vmail-tools-recipient-access.cui.sh
ed1447492d9d0703fe0963f9ff858a0c  cui-vmail-user-maildropfilter.cui.sh
ba28123b5711a325b44ab275ffc687c6  cui-vmail-modules-maildropfilter
4466c9dcc8e5d6cdd1fba794fd29c713  cui-vmail-tools-sender-access.cui.sh
b5515bd021032addd2736f6702fd7e31  cui-vmail-user-relaymap.cui.sh
7551bf66bde63132005ac23ac302cbf3  cui-vmail-modules-mailhandling
46696aa77fd093059c82f219631b284a  cui-vmail-user-canonicalmap.cui.sh
d93124d01427e7e969df68fa119aa73e  cui-vmail-user-userhandling.cui.sh
b8200a35029d061e3162464d842c9c83  cui-vmail-tools-client-access.cui.sh
455eb890793c7a4b724879af17bb1889  cui-vmail-user-domainhandling.cui.sh
d087c51c598921227a8ed712515e4980  cui-vmail-tools-fetchmailhandling.cui.sh
f08d35621ef343abf3ccebdf76584577  cui-vmail-user-forwardings.cui.sh
09f44215aa0cad9e31696111288fd33c  cui-vmail.sqldata.sql
f27030b567735d880afbcef0ddce5362  cui-vmail.sqltable.sql
bf59f548cdaa552532b6211c0cd87b38  cui-vmail.sqltrigger.sql
380ca9971c02809dbd55a45261720355  cui-vmail.sqlview.sql
499bdd67aac01cf2fa6e821dc0aa2cea  cui-vmail.txt"
sha256sums="71c6d28bec39b77d48f5a07afc9e6a8313e54aa74b337941575af335f56f7b19  cui-vmail.default
2f039fd2547bfb20cfd70d7532106d97687d971e69127fdbdbf52179ef0599be  cui-vmail.check
48ce211795336e8dc615cf9e4ae18ea4c49eb4fa1c504c3a70c005f39361d17b  cui-vmail.check.exp
03c1fc4e5ec3147b51a2774f4f850d597f56a7973c0d37d628c7178240d36631  cui-vmail.help
540bbee7fe847ca902e962d4d2bd3112f1a3fc6ac1030c85b84e67a26fc87d73  cui-vmail.initd
d5ecac71b6d87186eeed6d95ea6b50c04f5b903f762fd55f65c5a34b1ec688d8  cui-vmail.sh
af935a45fb873bb9c6468a8fd2049f42a965e35bccc04ae0adcefdc6ab1e8266  cui-vmail-update.sh
c3c50c454e014bcf2147e8868ae3b7a7dc5cc6087f1bdfe3c1fb7fb87f2c151e  cui-vmail.menu
79808136b4b692bcae3091cf487e4e79089f50bb3eb35a633cd51ee7e01d26b5  cui-vmail.modules.menu
bea349555162b7535fbc1cf7509a2d0acf8ecf235848245ce1586b171607b91b  cui-vmail.tools.menu
2692ae194d95604f13885db2017b0456e83cc4cb3ad817a627dd539a5ac95bca  cui-vmail.user.menu
c832d544b8b41e63dd3f9626320e081455c30bffb8518fbacfaf3501b425a313  cui-vmail-modules-fetchmail
deb9963d5700b46bfd96469212d49dd4a0e3a1d1df05e1fe0ebb72513a5842d1  cui-vmail-tools-recipient-access.cui.sh
254d7f8ff690fd9f5b41c39bd9078300e6255ad0fe8270dc49b49a7c96fe9af9  cui-vmail-user-maildropfilter.cui.sh
5ab56f33c528dd29ef1d33b1d9da18159d64eb4c4d5de49ef335472a53e56bc2  cui-vmail-modules-maildropfilter
14ff11e1c79c011c99d6f50328ac020071e7d8d593545a1d7ab4361efc81979a  cui-vmail-tools-sender-access.cui.sh
17076a49d45dcdee7ca904759b190720b8ed7c39fe03b3492ec942b1987444b8  cui-vmail-user-relaymap.cui.sh
eaa6f95556a41811399beaec835d3be861712ec92265c48594d21490fde5cfaf  cui-vmail-modules-mailhandling
b4262929a3e47f426a4f73249693510b90c9b54a1fa5ff5392c9dfbea383af11  cui-vmail-user-canonicalmap.cui.sh
556b3736c500d10854bd8229bc008bc6c41dd1b07e99be88664c145b58e9a073  cui-vmail-user-userhandling.cui.sh
08ae3b8317332aa5582888832bbbe1376a188e2d3a37181c4f568122549677cd  cui-vmail-tools-client-access.cui.sh
1e2961abad59c3db9842fe4916238f6491d9c7885f316f3c226dd7ec04f507ae  cui-vmail-user-domainhandling.cui.sh
4746c64156bb7578b0ab3c0f49a6ee73f5e8fe7c657cb0f0995b7d189db9765b  cui-vmail-tools-fetchmailhandling.cui.sh
3a929976aad1e8059da040640c564da7efb2dfda2661840ea03d9faa4b97c5be  cui-vmail-user-forwardings.cui.sh
1f250112d069ca8ea3ce0ef863ead99730c6c589ed81bec74d38b37aa8a69bc8  cui-vmail.sqldata.sql
9a03415296505947cd553cd8449ae5786eaeda6a09d31dfc6afcd900c0477927  cui-vmail.sqltable.sql
75cf5e38ce693b9f995c3265719c2dd1a9965ad02363695732e0cf2e7d47e537  cui-vmail.sqltrigger.sql
7d026771986d84117f6273f0fc1ac6bf96c5293003d4d391595677772472b944  cui-vmail.sqlview.sql
086eaa9f34dd9ac4b153c0d7995c65d93a9eb2598ebd02e5b61539a58f76ab6a  cui-vmail.txt"
sha512sums="cc71fd6ea84d58909d26b8258c7d0d4836812dd9119cf354c0e7f1a1c8c5304f911981c9762baf678e5f37387d1da5a50937643aa6414fbc82ca84436e182061  cui-vmail.default
a54ddbeaecbf439604f69e668a172cdaa73d31f3bf7cc55241746e0d241b16702f467dc7587fe7369ca2a36297c27e7781f8494a6db9c32939483490f71b7238  cui-vmail.check
5503fe9c36f152a4bc45ed119e4b68a06b44d05243dfe41ea3461143d82be66a956f07ce02320684c23875b4db471aa68ef96a6c6e82099166925f3b227af533  cui-vmail.check.exp
545f27f7f63416cec7bbd9a443908eb0dea882ba4debbd1a51dd94839381bf99b55dc87d63eeac9b5b2c0ee14d7e091a79b03750e2f6bdbbf0217fb5ac6561f3  cui-vmail.help
c833c7f71963034b53737576d004ffcd57abae586f7538aba0230730983e9ff6e90eb917f45ffcd2fec1f65d9759d5b36cc9ab55af503128a51c86852245f687  cui-vmail.initd
5796f35d5ae6039f150c678de7108464e2908c4eb87e3af9a11aae72537b342eb5172971f58b134d5bcf789115bd749d1199cd68ca6dfd17beb2c26ad31202cd  cui-vmail.sh
2caf4f0166dd999d7829feed0ef5af70f19cfb6048976aed85ea31b53d203d299e9ad33933140d56e12980e2e8cf534b3bf660f878c033f9fd7221c006998ea9  cui-vmail-update.sh
31a1cb8c9cda05589e306364f4e5956ed9c360b13f71f95302ea712100e326715fd5081e5a8a5ae855ac4b04feeb89100c9fddbe1198ec19e70cb89da95c47b9  cui-vmail.menu
1d1a7d1c6711a15b19edede0395c0018d3a83c50ccbae410307429b2f11f8f64ceeb7ad7879cf912c2d66b002910073b538b0834c95c550c8725f3c8e84ab8d3  cui-vmail.modules.menu
40ebd6be2100e1ac40b5c1b37be1cebe49ac9ff5b24ff081e094dad314849f5d9dff16750c6b27b374229c8934e2f4d1291c60117f20b0cc9733c426e0af3b4a  cui-vmail.tools.menu
ae016eb20b1ab587b7c8fa7443e3b6c57dc4408ad2b15960af846b63ca274ff6f61b2a63f22a308386022ae411e40b1cb27709cdae4f2f04ca48a9c0416696f0  cui-vmail.user.menu
286247d08168e61c02dd6b7afa9b3196366c89f60cccb4b341b4e67bb075ee42a977b550990f16373b2be8606ff8a9147d651eca1a7638039d7ba7e11750d806  cui-vmail-modules-fetchmail
3996c7e7996b5081c69bfba05694097eace83af7b3c6655b33c95471ca5f4e427a3e084e04f68ecd058931fd1705b806d2d2f0440ab29438a500de9645dec591  cui-vmail-tools-recipient-access.cui.sh
1944b472a80d902d0e846317a3292d41e13f6a404684c076b4f39d48960395f6ffb8286e4d3394e64e6afc1ec1112ed5dd6e61fa70b6eee9e2a9465e0b303e11  cui-vmail-user-maildropfilter.cui.sh
bfb49516f53f9b8f5e4f747d3d16301b9ce0b622e8f3887bdbd92ae83872265d13bd012e4e724c08f999970a81c90838863103727299931c9328c67508aec250  cui-vmail-modules-maildropfilter
1ebb459fb19d007ffef3a13dcc1dee7e0446e8244e66e3e26ea5c0e3ae35688fe53c8abfab9d862cdc158ea08f7f310c666284377a24f8cdc3c34897b418e58a  cui-vmail-tools-sender-access.cui.sh
f6dab67dff4c208d302ef9032625ae51308551291ffe346561157ea5a9fc1689d32e6b94fd3cceb3f512d9d186bd59c69b5d4db12cbd264b6b5e52512a3c399f  cui-vmail-user-relaymap.cui.sh
c7e47af6f1351bd1fdd45dd0fd34db455fcc6ebcb7dc9386dbb11847b608475c91df82ea41bca27164ed8506544033d1ef673df3cdd7eb662c0003a3416c2817  cui-vmail-modules-mailhandling
35820196d42f89d9c66780b0d96dfd0e257b11491e82845ea44f7f0a68bd4787c75a46cd487bf6a807e551a3e55754154dae38fdc7c67bd9ff66f54c421cffb3  cui-vmail-user-canonicalmap.cui.sh
6499c6d77e5609b24994b9f4b662728efbc0fb5f63d69fc72f5646818091547fb6c1834e78cc1a9f837649724b993d6c068aed4e196c355b60212ac13a7abfc5  cui-vmail-user-userhandling.cui.sh
b89286bdaaef0a280e20d66fe6e86dc225fb4be1bb78fb3cecd5b2c534c6676e810ad3c2c1aba79c04bb429af9c4b8a1fc917f4c6da0c5f01715ff31ee090f18  cui-vmail-tools-client-access.cui.sh
8f35cf7493ed626730de7e79c7256a47efcf7a8755b26623e00e8826d5a3de98c8c1af3fe97f0bbb5f5240ce0c12c0c62bb82aba83a6e7956cd8c755d00930a4  cui-vmail-user-domainhandling.cui.sh
76a5fbf804b33d24b17d83697726b8d1c97a328ac2475d4e94fde987afba6076959e98fcc90b0cbf56e11562b4a205c09ceb0601aedcf84ab12839269fd72bc9  cui-vmail-tools-fetchmailhandling.cui.sh
0b162e8c84724b57af555e43e60f1ac5af3325a450748df974519b8b089ccf2b8c73ef87074d0f5479680493b8e41cdd01f30028e15b7eb4a8aac043f63509b0  cui-vmail-user-forwardings.cui.sh
053c6a39d320a6e2395c292a02f8d2827492693a24c3ee1719f5b49c08df676c36dcf6c825fc360052142ad1900184214bba08a0d828873899ee04f44c011657  cui-vmail.sqldata.sql
9ca972fa2d28946af7a2f05923da62d3406344e815069e2ac66a17201ef622beb220a4f737dcd20a9a4738568a0935fd73cd668d79fe0f99f80ca4b756acdbde  cui-vmail.sqltable.sql
c938ee543bcf21562388b8424cd35a7b36fc6a8033e095a514788d30452843b9ac0fd6da00851623465a38d5bb6a81c5bb2da553cba4914d3e2392e602a9ad2c  cui-vmail.sqltrigger.sql
fd0d1f49df96e7be4b4efcf0802e2026c7cefcd63040b1024ddc4aa3f97379616a5f184467fe5987abce646f43c799cb97f5daa9d7654f4d99022fba184af86f  cui-vmail.sqlview.sql
95c8bfd5fcf5413d0f1a0d1b93e15a4c776b934b6e9294b478eb315e37a245a4b8582f02c89b3dd4fa503e9fa49f0aba8a99ef148ff5e2e16f1f1b3213a3edcf  cui-vmail.txt"
