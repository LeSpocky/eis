# Contributor: jv <jens@eisfair.org>
# Maintainer: jv <jens@eisfair.org>
pkgname=cui-vsftpd
pkgver=1.0.0
pkgrel=0
pkgdesc="CUI setup for very secure FTP service (vsftpd)"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu vsftpd linux-pam-pwdfile libcui-addonpwdfile openssl"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.pre-upgrade $pkgname.post-upgrade $pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.default
		${pkgname}.check
		${pkgname}.help
		${pkgname}.sh
		${pkgname}-update.sh
		${pkgname}.menu
		${pkgname}.txt
		vsftpd-user.cui.sh
		cui-vsftpd.syslog-destination
		cui-vsftpd.syslog-log
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"

	install -D -m644 ${srcdir}/${pkgname}.check         ${pkgdir}/etc/check.d/vsftpd || return 1
	install -D -m644 ${srcdir}/${pkgname}.default       ${pkgdir}/etc/default.d/vsftpd || return 1
	install -D -m644 ${srcdir}/${pkgname}.help          ${pkgdir}/var/install/help/vsftpd || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh            ${pkgdir}/var/install/config.d/vsftpd.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh     ${pkgdir}/var/install/config.d/vsftpd-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.menu          ${pkgdir}/var/install/menu/setup.services.vsftpd.menu || return 1	
	install -D -m644 ${srcdir}/${pkgname}.txt           ${pkgdir}/usr/share/doc/vsftpd/vsftpd.txt || return 1
	install -D -m755 ${srcdir}/vsftpd-user.cui.sh       ${pkgdir}/var/install/bin/vsftpd-user.cui.sh || return 1
	install -D -m755 ${srcdir}/cui-vsftpd.syslog-destination  ${pkgdir}/etc/syslog-ng/syslog-ng-destination.vsftp || return 1
	install -D -m755 ${srcdir}/cui-vsftpd.syslog-log    ${pkgdir}/etc/syslog-ng/syslog-ng-log.vsftp || return 1    	
}

md5sums="fa0d2dd4bcc2eeca1028a02d29e7b8e3  cui-vsftpd.default
d4267da7b1a43450094f08ce7ee8b55c  cui-vsftpd.check
2f61361fa15de54560480e29fb49ec88  cui-vsftpd.help
ad123dd8aff42ceb399c48ea5e55bd2c  cui-vsftpd.sh
27217cfa1e8cac5709c069abc0fe1d9c  cui-vsftpd-update.sh
83d0c750e2eba6b68e7e491158da8ab6  cui-vsftpd.menu
398772086325a750c8350b599236e297  cui-vsftpd.txt
8f8b44b18a505358e9b68fe08adc54d4  vsftpd-user.cui.sh
16ac169f6a02c9c4a8033a8af7960767  cui-vsftpd.syslog-destination
02cebf22b722900dc7707acb5a885c16  cui-vsftpd.syslog-log"
sha256sums="b72c28ec2e88f98d98d6f259812c6dc5c08ae69a4d230d8e41af05e80f99a232  cui-vsftpd.default
24458ffe29d00a6df392837e4c3bd8523491e6719d18924a6f5917b08833c769  cui-vsftpd.check
091227300352b71951c049b3000138210aa2381008a1a1630ecaddc143e61cba  cui-vsftpd.help
03e1c4b544a340656b3e38aaa1af41966b354431092ac25b16c5264212232c92  cui-vsftpd.sh
5486b60d1db82ff6fa2ab2fbe046e9923138587ff9154de9d7df10ac10ac79be  cui-vsftpd-update.sh
6771ac71572a9a05e11f0ac41f6647eed0267f03ca2d8d6cbd97c36e2fc0810e  cui-vsftpd.menu
02728484cbdf3b5a45d1c7ab42b126ce26d17446a400aa3d7df0f77447d77ebd  cui-vsftpd.txt
09a765b7cf3c8154628f408a49e9a5d2c963b9585c53a64e29f0f130b07f9bd0  vsftpd-user.cui.sh
fe69d0311b6088abb31766fe38e067443162cc44c6c8944f1dc71fa6c7bbee36  cui-vsftpd.syslog-destination
32623eb48f4a90dfaebee2c92e8a46349ab9a5748f6fbc1082537076ec6e146a  cui-vsftpd.syslog-log"
sha512sums="022acb8cb3a13a3a39b829f95e0346652ebffc91150f43f270edcb763177e65e4fb5f275299c6a64a5798e9e68c530703193a210a3ded79ddef3b4e597f8bfcd  cui-vsftpd.default
fffbed9d7671161b38a22160824d003060ff2b4dc1c77538699798958273f44b5f0e74abb2fb0053b0da20ef66b449e0f1a81e18e96da22a4acd92a625ff46a7  cui-vsftpd.check
811d563e614dc631c55cd0481aa6f2a6596b9ae50ab24c415ebaaf95c75032ea5b70ea4164a1fc0e242a2ab5873163c906cbde0df29c7cc99d5d5f066f35d43d  cui-vsftpd.help
a7ba4f4e34375e91b71cf219c7d2ae5a5b55c602910ee2c3298110b86ae44b80fe64af9930905768698825f061eb1641d5b53566e1cdcbbe9c5566f7a44dd634  cui-vsftpd.sh
2e38ccce24b8527b9d6449e1716b56d4c6ae9726c98fda3232938ba40843bb48f215f1f7e91cdfe142efe3fbf9de06091dd4b7528ea808ed2702d66708df9309  cui-vsftpd-update.sh
051093df0a3c522ee34903be5710d8df2e6937e43ac883f357b8d043508137f988e39d2a09fc22fe65b9616d77eb55c129edf9e5dab1a538eb826db36d610720  cui-vsftpd.menu
cf14870ae568e603d73dae8bc8cc8ab67083b7803cc37e11d42dabdc241c608e0776feffe8b46328e71b1e97bb4c5692670866798857409ed5f882dab09b3508  cui-vsftpd.txt
91bca66601091bf5b75cbd4711a3bb88615ac460a3a74151cf4a2a4a0c97389244a1fe2aa38d87bf828b73ede8b735a817842f2f55188adae99738960cdadd19  vsftpd-user.cui.sh
048fbca391181218452061d8434f19cc37439c577286d377a061786a9a01fddcfc2b7fcda9c1d79b8f4ee43f990ca73b2f9566b0f85dab9ed822e2bc2842d442  cui-vsftpd.syslog-destination
ca0965e87fa0de2b8e250ba597de679f93d24c8325756a2b06deed3ac04bc3996b85331942204cf49567d06a262616ec25f6143ce09f231687e6796c1a53c729  cui-vsftpd.syslog-log"
