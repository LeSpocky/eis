# Contributor: jv <jens@eisfair.org>
# Maintainer: jv <jens@eisfair.org>
pkgname=cui-vsftpd
pkgver=1.0.0
pkgrel=0
pkgdesc="CUI setup for very secure FTP service (vsftpd)"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="vsftpd linux-pam-pwdfile openssl"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.pre-upgrade $pkgname.post-install $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.default
		${pkgname}.check
		${pkgname}.help
		${pkgname}.sh
		${pkgname}-update.sh
		${pkgname}.menu
		${pkgname}.txt
		vsftpd-user.cui.sh
"

_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"

	install -D -m644 ${srcdir}/${pkgname}.check         ${pkgdir}/etc/check.d/vsftpd || return 1
	install -D -m644 ${srcdir}/${pkgname}.default       ${pkgdir}/etc/default.d/vsftpd || return 1
	install -D -m644 ${srcdir}/${pkgname}.help          ${pkgdir}/var/install/help/vsftpd || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh            ${pkgdir}/var/install/config.d/vsftpd.sh || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh     ${pkgdir}/var/install/config.d/vsftpd-update.sh || return 1
	install -D -m644 ${srcdir}/${pkgname}.menu          ${pkgdir}/var/install/menu/setup.services.vsftpd.menu || return 1	
	install -D -m644 ${srcdir}/${pkgname}.txt           ${pkgdir}/usr/share/doc/vsftpd/vsftpd.txt || return 1
	install -D -m755 ${srcdir}/vsftpd-user.cui.sh       ${pkgdir}/var/install/bin/vsftpd-user.cui.sh || return 1
}

md5sums="b0703ccc394cdfa27a413f7d89549985  cui-vsftpd.default
aa61b1396c280a02c9c3032f2c62857a  cui-vsftpd.check
4d2232671afbc6c33d39d91d08e15c11  cui-vsftpd.help
e2c5d22c4d772a5ef09bc3f45467cd07  cui-vsftpd.sh
afd6c4dd996f026254e71c3c8fbf3440  cui-vsftpd-update.sh
83d0c750e2eba6b68e7e491158da8ab6  cui-vsftpd.menu
7939aa9b6a448eebea5917d68783328e  cui-vsftpd.txt
64c58db0074364b5421acf07ada41e50  vsftpd-user.cui.sh"
sha256sums="5440fc4c848e906b7e345118c2b00f07f1406b1d6504d704d90f7edff46f43f1  cui-vsftpd.default
ec2fbe5cc75a1345734003b59ad6ea6c589251e6c839e73a0ea3f6374fc40fd9  cui-vsftpd.check
8ca5df83f37ae4f8fc059f9fee7fecbbaaf0c4d1e1ac2f54c947e89335d4b2d9  cui-vsftpd.help
5949a226f346e9b502cea1143788d4e1174c7e2f576e4196199cb1c4f53729dc  cui-vsftpd.sh
66c45fcc30d03f069aa030c17b043f0abb4073bacbd8285a269c36bc7a59ac6b  cui-vsftpd-update.sh
6771ac71572a9a05e11f0ac41f6647eed0267f03ca2d8d6cbd97c36e2fc0810e  cui-vsftpd.menu
fc867f131e8d81e348ce2b7bccc4722130be55b5c96ea5808d0ff8a616997442  cui-vsftpd.txt
b2864142c7da6eb64ce1d8a9cb789c65819269b43a2c72b301226d8289279fac  vsftpd-user.cui.sh"
sha512sums="0be5e9a9d8da85fab3a62f01b0fb52ce09402b885e799fc9a07a3a082e45a453463d4dbe25208d7daa22c5b0c5d8ec952269a347cb92220741feed2839810eae  cui-vsftpd.default
9fc4004f774a0ec6dd785bf244d91b3d8007beb2eeb9d8508c65622c1ae9681f059a6cd9d4057bce7b303248f72a50be5e71e6bb95d438b2b08f828be1bd6665  cui-vsftpd.check
ca10251d49895d51dd5dcdf94901e4659ed5fcadacd895b3b1ab6f8e0807bcaabc97ecbe2aa6aae693905cb3c339e27b7517deb9d632f2393e6b849de69f6233  cui-vsftpd.help
de87e83f1656ff8a117ffc0db0ee445bc880c6d98e57d9a3458b6102943b1533c32125eb0a6af2ea5018d5184a63f0fbc4d55ad26282a539a51839c79387fdfe  cui-vsftpd.sh
021591255517496e17c326d48acbc18999e6989025f400c15fa99a5ce43d772570082a6bedf340a104fa5d1db2f9df27e551bc26b31603b43a7f1a296c7f4e4c  cui-vsftpd-update.sh
051093df0a3c522ee34903be5710d8df2e6937e43ac883f357b8d043508137f988e39d2a09fc22fe65b9616d77eb55c129edf9e5dab1a538eb826db36d610720  cui-vsftpd.menu
8d2962baf1eeb592cb02af865c76238011602efebf797e531a9df3857613a26ae0b2cac7a3e5fe46a4e1ece03c21b43a6312b507406780b3205f9307478f42ec  cui-vsftpd.txt
4bc656a88f64576bf1f9823936bada4333f60af6fd73237afd88047de162e93d99e57167486b032f1c2db5a54d3c495c1be89e53d76d2dd4d720d3de31ade1e9  vsftpd-user.cui.sh"
