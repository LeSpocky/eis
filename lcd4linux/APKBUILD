# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer:
pkgname=lcd4linux
pkgver=0.11.0
pkgRC=-SVN
pkgrel=0
pkgdesc="LCD4Linux"
url="http://ssl.bulix.org/projects/lcd4linux/"
arch="all"
license="GPL"
depends=""
depends_dev="libusb-compat-dev subversion libtool automake autoconf gettext-dev"
makedepends="$depends_dev"
install=""
source="plugin_i2c_sensors.c.patch"
repoURL="https://ssl.bulix.org/svn/lcd4linux/trunk"

_builddir="$srcdir/${pkgname}-$pkgver${pkgRC}"

prepare() {
	local i
	svn co ${repoURL} ${_builddir}
	cd "$_builddir"
	for i in ${source}; do
		case ${i} in
    		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./bootstrap
	./configure \
	    --without-x \
	    --without-python \
	    --with-drivers='all,!TeakLCM' || return 1
	make || return 1
}

package() {
	cd "$_builddir"
	install -D -m755 ${pkgname} ${pkgdir}/usr/bin/${pkgname} || return 1
	mkdir -p -m 755 ${pkgdir}/etc/${pkgname}
}
md5sums="07515690b392eeb44374aaff977194e8  plugin_i2c_sensors.c.patch
a689c01caf8387ddf08dba3ca6c48040  drv_RouterBoard.patch"
sha256sums="1a6a9e68be0ae91ab366b319cfbcc1a1fea4ae837984f3575cd9152349e57713  plugin_i2c_sensors.c.patch
a25103b1ff6662c0d96a5ee261bf90fbd69bd04f51ba6cefcd3d5dea15d231cb  drv_RouterBoard.patch"
sha512sums="e0a9ac5692d08ebbd3c513f95ef47ac0b04af4a13a44d97407cd921c96e538b6875f0c7756411f1ce2787df6aa18370e9e7e80fc55958f14a22fce2736177359  plugin_i2c_sensors.c.patch
727e250a72808e098d222e1b0f1c859c2c5bf00107e3d4d734d0c24f80c15ad7bfde1f33d03e2883c0f7150698782083e07982f2619e4a2d3ccd979314b9903a  drv_RouterBoard.patch"
