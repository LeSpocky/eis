# Contributor: starwarsfan <yves@eisfair.org>
# Maintainer: starwarsfan <yves@eisfair.org>
pkgname=cui-openntpd
pkgver=1.0.0
pkgrel=0
pkgdesc="CUI Setup for openntpd"
url="http://www.eisfair.org"
arch="noarch"
license="GPL"
depends="cuimenu openntpd"
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.pre-upgrade $pkgname.post-deinstall"
subpackages=""
source="${pkgname}.check
        ${pkgname}.check.exp
        ${pkgname}.check.ext
        ${pkgname}.default
        ${pkgname}.help
        ${pkgname}.setup.services.ntp.menu
        ${pkgname}.sh
        ${pkgname}.txt
        ${pkgname}.txt.toc
        ${pkgname}-update.sh
"

_pname="cui-openntpd"
_builddir=

prepare() {
	local i
	cd "$_builddir"
	for i in ${source} ; do
		case ${i} in
		*.patch) msg ${i}; patch -p1 -i "$srcdir"/${i} || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	cd ${startdir}/dialog.d
	for currentDialogScript in `ls` ; do
		install -D -m755 ${currentDialogScript} ${pkgdir}/var/install/dialog.d/${currentDialogScript} || return 1
	done
	cd -
	install -D -m644 ${srcdir}/${pkgname}.check                                ${pkgdir}/etc/check.d/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.check.exp                            ${pkgdir}/etc/check.d/${_pname}.exp || return 1
	install -D -m644 ${srcdir}/${pkgname}.check.ext                            ${pkgdir}/etc/check.d/${_pname}.ext || return 1
	install -D -m644 ${srcdir}/${pkgname}.default                              ${pkgdir}/etc/default.d/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.help                                 ${pkgdir}/var/install/help/${_pname} || return 1
	install -D -m644 ${srcdir}/${pkgname}.setup.services.ntp.menu              ${pkgdir}/var/install/menu/setup.services.ntp.menu || return 1
	install -D -m755 ${srcdir}/${pkgname}.sh                                   ${pkgdir}/var/install/config.d/${_pname}.sh || return 1
    install -D -m644 ${srcdir}/${pkgname}.txt                                  ${pkgdir}/usr/share/doc/${_pname}/${_pname}.txt || return 1
    install -D -m644 ${srcdir}/${pkgname}.txt.toc                              ${pkgdir}/usr/share/doc/${_pname}/${_pname}.toc || return 1
	install -D -m755 ${srcdir}/${pkgname}-update.sh                            ${pkgdir}/var/install/config.d/${_pname}-update.sh || return 1
}
