# Contributor: Jens Vehlhaber jv <jens@eisfair.org>
# Maintainer: Jens Vehlhaber jv <jens@eisfair.org>
pkgname=smc-milter-new
pkgver=1.0.1
pkgrel=0
pkgdesc="Virus scanner milter for postfix"
url="http://www.eisfair.org"
arch="all"
license="GPLv2"
depends="altermime unrar zip ripmime"
depends_dev="libmilter-dev mysql-dev"
makedepends="$depends_dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages=""
source="
	smc-milter-new.initd
	smc-milter-new.confd
	"

_builddir="$srcdir/$pkgname"

prepare() {
	cp -r  ${startdir}/smc-milter-new "$srcdir/"
}

build() {
	cd "$_builddir"
	make -j1 -s || return 1
}

package() {
	cd "$_builddir"
	install -m755 -D "$_builddir"/$pkgname \
		"$pkgdir"/usr/sbin/$pkgname || return 1
	install -m755 -D "$_builddir"/${pkgname}-unzip.sh \
		"$pkgdir"/usr/bin/${pkgname}-unzip.sh || return 1
	install -m755 -D "$srcdir"/$pkgname.initd \
		"$pkgdir"/etc/init.d/$pkgname || return 1
	install -m640 -D "$srcdir"/$pkgname.confd \
		"$pkgdir"/etc/smc-milter-new/$pkgname.conf || return 1
}

md5sums="f7f8db564530e1b58a5c68476a9eee19  smc-milter-new.initd
cf7a22359a59db3fb1128a28878d145e  smc-milter-new.confd"
sha256sums="aeed7b65396f0f4588392e363feb566a2a7c4d4b43dcb013afa72419c8560289  smc-milter-new.initd
0e612214279ba46b8409a5c5df2fc78c8f3950385800f5da86bc40ef50e7c84b  smc-milter-new.confd"
sha512sums="3294c8019180b7e63fd788989cc2f38a91bb4c875152a5bc467e235104563f27c49aa92e4c47a5896b8630c23a70ba6a7ccced3edb152eb465c730325b96d0ea  smc-milter-new.initd
6a2b2316f240ba2019cea5b97fb35f0c362c3f5a3b1c6c71dd185cdb5c9fea3581c2c74a8a6c5144f5972bea70d64cb65c0f88e917f0002ae1ed5cd1a38b70c1  smc-milter-new.confd"
