# Contributor: jv <jens@eisfair.org>
# Maintainer:
pkgname=smc-milter-new
pkgver=1.0.0
pkgrel=3
pkgdesc="Virus scanner milter"
url="http://www.eisfair.org"
arch="all"
license="GPLv2"
depends="altermime unrar zip"
depends_dev="libmilter-dev mysql-dev"
makedepends="$depends_dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages=""
source="
	smc-milter-new.initd
	smc-milter-new.confd
	"

_builddir="$srcdir/$pkgname"

prepare() {
	cp -r  ${startdir}/smc-milter-new "$srcdir/"
}

build() {
	cd "$_builddir"
	make -j1 -s || return 1
}

package() {
	cd "$_builddir"
	install -m755 -D "$_builddir"/$pkgname \
		"$pkgdir"/usr/sbin/$pkgname || return 1
	install -m755 -D "$_builddir"/${pkgname}-unzip.sh \
		"$pkgdir"/usr/bin/${pkgname}-unzip.sh || return 1
	install -m755 -D "$srcdir"/$pkgname.initd \
		"$pkgdir"/etc/init.d/$pkgname || return 1
	install -m640 -D "$srcdir"/$pkgname.confd \
		"$pkgdir"/etc/smc-milter-new/$pkgname.conf || return 1
}

md5sums="4fbde2fb53bc7b35041bf2e8758460e7  smc-milter-new.initd
0083839a27201b98c8d5fed69b16f0c3  smc-milter-new.confd"
sha256sums="3cba285119cc1e8705c9cc8e2daf6c333ad669e7b0fc8afddbb3019de10575f5  smc-milter-new.initd
05fd21791562b31e31346a4df9d1c4d1e66080eb36be2481d9a3dcb55512df3e  smc-milter-new.confd"
sha512sums="74edae80c4fb298e4a24bcbe2d32dfe27f4fecc37fa0769f898bc3e4486d891a7fecb4417048e35e6cd583d1c456e26e6f7897470fe38ec18c03236bb13f9480  smc-milter-new.initd
bad1c9a5660d3086320a4bd0fdecb2e096d9088f4d19e61154f75e768abefac7173eb4deba9de0962b3367204da6f4267d6b9d5de24e5096afeefc976c44cc38  smc-milter-new.confd"
