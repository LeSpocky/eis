# Contributor: jv <jens@eisfair.org>
# Maintainer:
pkgname=smc-milter-new
pkgver=1.0.0
pkgrel=3
pkgdesc="Virus scanner milter"
url="http://www.eisfair.org"
arch="all"
license="GPLv2"
depends="altermime unrar zip"
depends_dev="libmilter-dev mysql-dev"
makedepends="$depends_dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages=""
source="
	smc-milter-new.initd
	smc-milter-new.confd
	"

_builddir="$srcdir/$pkgname"

prepare() {
	cp -r  ${startdir}/smc-milter-new "$srcdir/"
}

build() {
	cd "$_builddir"
	make -j1 -s || return 1
}

package() {
	cd "$_builddir"
	install -m755 -D "$_builddir"/$pkgname \
		"$pkgdir"/usr/sbin/$pkgname || return 1
	install -m755 -D "$_builddir"/${pkgname}-unzip.sh \
		"$pkgdir"/usr/bin/${pkgname}-unzip.sh || return 1
	install -m755 -D "$srcdir"/$pkgname.initd \
		"$pkgdir"/etc/init.d/$pkgname || return 1
	install -m640 -D "$srcdir"/$pkgname.confd \
		"$pkgdir"/etc/smc-milter-new/$pkgname.conf || return 1
}

md5sums="e4ea9bb5816f5f5fce8a4721c67269f2  smc-milter-new.initd
34059bd135337e508e11df8ca2171bf7  smc-milter-new.confd"
sha256sums="47b5f33458018b692b80d51141396e965be74d8343cd48052300844bd57a9429  smc-milter-new.initd
c1b0d2798f31c35031530ab2075c9bd7ee0f30e83a8cccbef9a120226b3b4b07  smc-milter-new.confd"
sha512sums="ddc64be4450aac1664d779e9f77a46f96700c3d2ab6edba48f813fbd6e1d5eddd5c2e3494d666ef9c1ca0e1fa61abdc0e52abc65e7ba6c5649de60f312b6fb25  smc-milter-new.initd
95a8412529ab428ac7f049185ec5125c3583841c4b03a28efcce4e9ee7b7a4df6d2ec93abcd8265d2fb5e89266885d5ce092fa3ba80b977661147502d12e2a4e  smc-milter-new.confd"
