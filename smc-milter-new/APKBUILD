# Contributor: Jens Vehlhaber jv <jens@eisfair.org>
# Maintainer: Jens Vehlhaber jv <jens@eisfair.org>
pkgname=smc-milter-new
pkgver=1.0.0
pkgrel=4
pkgdesc="Virus scanner milter for postfix"
url="http://www.eisfair.org"
arch="all"
license="GPLv2"
depends="altermime unrar zip"
depends_dev="libmilter-dev mysql-dev"
makedepends="$depends_dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages=""
source="
	smc-milter-new.initd
	smc-milter-new.confd
	"

_builddir="$srcdir/$pkgname"

prepare() {
	cp -r  ${startdir}/smc-milter-new "$srcdir/"
}

build() {
	cd "$_builddir"
	make -j1 -s || return 1
}

package() {
	cd "$_builddir"
	install -m755 -D "$_builddir"/$pkgname \
		"$pkgdir"/usr/sbin/$pkgname || return 1
	install -m755 -D "$_builddir"/${pkgname}-unzip.sh \
		"$pkgdir"/usr/bin/${pkgname}-unzip.sh || return 1
	install -m755 -D "$srcdir"/$pkgname.initd \
		"$pkgdir"/etc/init.d/$pkgname || return 1
	install -m640 -D "$srcdir"/$pkgname.confd \
		"$pkgdir"/etc/smc-milter-new/$pkgname.conf || return 1
}

md5sums="514d2ecaadb4406c28b7dd44e41295f3  smc-milter-new.initd
6ebc0e6260579eeb42ffafce43a46e76  smc-milter-new.confd"
sha256sums="8faada8f73f6f2c1c8f1ee6cb41763818d622216074f497685c5d1e4b430854e  smc-milter-new.initd
b0ccae47293930df405ddeae6e56a798d17dff2c1601e7601ffbd6c354609a13  smc-milter-new.confd"
sha512sums="04b622d0d53038300056919cc34cf182d225331e3709871aa42c7ad7af34f120026fbb67515ede212508d8137792578c09664fe96b3614246f6f0b1b6c19a054  smc-milter-new.initd
6e60c807aa926b35560a12c4dba8c43e46f3e36a81c7b62062d54c47d56a9de1b3eb09510b074bf535f06e68ef4d90fcd8bff5a3cc633153078d0dad2732c223  smc-milter-new.confd"
